# üß© Batfish Validation Module

## üìò Overview

This module is responsible for **validating and verifying network configurations** generated by a Large Language Model (LLM).  
Since LLMs may produce incomplete or incorrect configurations, the goal of this component is to automatically check the **correctness, consistency, and connectivity** of the generated configurations using **Batfish**.

It ensures that:
- The **topology** is consistent,  
- The **routing and interfaces** are correctly configured, and  
- The **end-to-end communication** between hosts remains functional after configuration changes.

---

## ‚öôÔ∏è Architecture

The Batfish validation module is implemented as a **Flask API** that interacts with the **Batfish network analysis engine**.


### üß© Components
| File | Description |
|------|--------------|
| **validator.py** | Flask web service that handles Batfish sessions, runs validation queries, and returns results. |
| **topology.json** | Defines the logical connections between all network devices. |
| **R1.txt, R2.txt** | Example router configuration files. |
| **h1.json, h2.json** | Host definitions used for reachability testing. |
| **requirements.txt** | Python dependencies (Flask, PyBatfish, etc.). |

---

## üß† How It Works

1. The **LLM** proposes configuration changes (for example, new OSPF commands).  
2. These proposed changes are sent to the Flask API via a POST request.  
3. The API creates a **temporary Batfish snapshot** that includes all device configurations and the topology.  
4. Batfish analyzes the snapshot and runs three checks:
   - **Control Plane (CP)** ‚Äî interface and routing consistency  
   - **Topology (TP)** ‚Äî structure and link correctness  
   - **Reachability (REACH)** ‚Äî connectivity between source and destination hosts  
5. The results are returned as a JSON report with PASS/FAIL for each test.

---

## üßæ API Example

### **Endpoint**
`POST /evaluate`

### **Example Request**
```json
{
  "changes": {
    "R1": ["router ospf 100", "network 10.0.0.0 0.0.0.255 area 0"]
  },
  "intent": {
    "reach": [{"src": "h1", "dst": "h2"}]
  }
}
